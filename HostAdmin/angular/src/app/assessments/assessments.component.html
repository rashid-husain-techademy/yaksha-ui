<div id="assessments">
    <h3 class="page-title m-b-20">{{pageTitle}}</h3>
    <div class="card">
        <div class="card-body d-flex justify-content-between">
            <div class="d-flex align-items-center w-100 category-custom">
                <i class="fas fa-filter text-info m-r-10"></i>
                <div class="col-sm-4">
                    <ng-multiselect-dropdown [(ngModel)]="selectedCatalog" (onSelect)="getAssessmentsByCatalog($event)"
                        (onDeSelect)="onCatalogDeselect()" [data]="catalogs" [placeholder]="constants.selectCatalog"
                        [settings]="catalogDropdownSettings" [ngModelOptions]="{standalone: true}">
                    </ng-multiselect-dropdown>
                </div>
                <div class="col-sm-4">
                    <ng-multiselect-dropdown [(ngModel)]="selectedCategory"
                        (onSelect)="getAssessmentsByCategory($event)" (onDeSelect)="OnCategoryDeselect()"
                        [data]="categories" [placeholder]="constants.selectCategory" [settings]="singleDropdownSettings"
                        [ngModelOptions]="{standalone: true}">
                    </ng-multiselect-dropdown>
                </div>
                <div class="form-check form-check-inline">
                    <input class="m-r-10" type="checkbox" id="isAssessmentActive" (change)="isChecked($event)"
                        [(ngModel)]="isActive">
                    <label class="m-0 font-weight-bold" for="isAssessmentActive">
                        {{constants.active}}
                    </label>
                </div>
                <div class="input-group w-50">
                    <input type="text" placeholder="{{constants.search}}" class="form-control  m-r-20"
                        [(ngModel)]="searchString" name="searchString" (keyup.enter)="getAssessmentsBySearchString()"
                        (keyup)="onKey($event)" autocomplete="off">
                    <button type="button" class="btn btn-info m-l-15" (click)="getAssessmentsBySearchString()">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="btn btn-outline-secondary" type="button" (click)="reset()">
                        <i class="fas fa-undo"></i>
                    </button>
                </div>
            </div>
            <!-- <div class="d-flex align-items-center">
                <span class="m-r-10">{{constants.filterBy}}:</span>
                <div class="btn-group">
                    <button type="button" class="btn btn-info">All</button>
                    <button type="button" class="btn btn-outline-secondary">Adaptive</button>
                </div>
            </div> -->
        </div>
    </div>
    <div class="result-count">
        <hr>
        <strong class="result">{{viewCount}} {{constants.of}} {{allTotalCount}}</strong>
    </div>
    <div class="d-flex justify-content-center" *ngIf="noAssessmentsFound">
        <h4>{{constants.noAssessmentsFound}}</h4>
    </div>
    <div class="d-flex flex-wrap assessments" *ngIf="!noAssessmentsFound">
        <div class="card m-b-20 m-l-10 m-r-10 m-b-20" *ngFor="let assessment of assessments">
            <div class="card-body d-flex flex-column">
                <div class="d-flex  flex-column">
                    <h4 class="text-info m-0 assessment-label">{{assessment?.name}}</h4>
                    <small class="text-muted">{{assessment?.categoryName}}</small>
                </div>
                <div class="m-t-10 d-flex flex-wrap flex-md-nowrap justify-content-between align-items-center">
                    <div class="keywords h-94 d-flex flex-wrap align-items-center justify-content-evenly">
                        <div class="m-r-20" *ngIf="!isGuruKashiTenant">
                            <h6 class="m-0">{{assessment?.duration}} mins</h6>
                            <small class="text-muted">{{constants.duration}}</small>
                        </div>
                        <div class="m-r-20">
                            <h6 class="m-0">{{assessment?.assessmentStartDate | date:'d, MMM y - h:mm a'}}</h6>
                            <small class="text-muted">{{constants.startTime}}</small>
                        </div>
                        <div class="m-r-20">
                            <h6 class="m-0">{{assessment?.assessmentEndDate | date:'d, MMM y - h:mm a'}}</h6>
                            <small class="text-muted">{{constants.endTime}}</small>
                        </div>

                    </div>

                </div>
                <div class="m-t-10 d-flex flex-wrap flex-md-nowrap justify-content-between align-items-center">
                    <div class="keywords h-94 d-flex flex-wrap align-items-center justify-content-evenly">
                        <div class="m-r-20" *ngIf="!isGuruKashiTenant">
                            <h6 class="m-0">{{
                                helper.convertUTCDateToLocalDate(getCutOffDate(assessment?.assessmentStartDate,assessment?.cutOffTime))
                                |
                                date:'d, MMM y - h:mm a'
                                }}</h6>
                            <small class="text-muted"> {{constants.cutOffDateandTime}}</small>
                        </div>
                        <div class="m-r-20">
                            <h6 class="m-0" [ngClass]="assessment?.isExpired ? 'inactive' : 'active'">
                                {{assessment?.isExpired ? constants.inActive : constants.active }}</h6>
                            <small class="text-muted">{{constants.assessmentStatus}}</small>
                        </div>
                    </div>
                    <div class="start-btn-container" *ngIf="!assessment?.isExpired">
                        <button class="btn btn-outline-info" (click)="startAssessment(assessment)"
                            type="button">{{constants.start}}</button>
                    </div>
                </div>
                <div class="m-t-10 d-flex flex-wrap flex-md-nowrap justify-content-between align-items-center">
                    <div class="keywords h-94 d-flex flex-wrap align-items-center justify-content-evenly">
                        <div class="m-r-20" *ngIf="!isGuruKashiTenant">
                            <h6 class="m-0">{{(assessment?.totalAttempts > 0) ? (assessment?.totalAttempts | number :
                                '2.0') : 0 }}</h6>
                            <small class="text-muted">{{constants.attempts}}</small>
                        </div>
                        <div class="m-r-20">
                            <h6 class="m-0">{{assessment?.passPercentage}}%</h6>
                            <small class="text-muted">{{constants.passPercentage}}</small>
                        </div>
                        <div class="m-r-20">
                            <h6 class="m-0">{{(assessment?.totalSkills > 0) ? (assessment?.totalSkills | number : '2.0')
                                : 0 }}</h6>
                            <small class="text-muted">{{constants.skills}}</small>
                        </div>
                        <div class="m-r-20">
                            <h6 class="m-0">{{(assessment?.totalQuestions > 0) ? (assessment?.totalQuestions | number :
                                '2.0') : 0 }}</h6>
                            <small class="text-muted">{{constants.questions}}</small>
                        </div>
                        <div class="m-r-20">
                            <h6 class="m-0">{{(assessment?.totalMCQQuestions > 0) ? (assessment?.totalMCQQuestions |
                                number : '2.0') : 0 }}</h6>
                            <small class="text-muted">{{constants.mcqType}}</small>
                        </div>
                        <div class="m-r-20">
                            <h6 class="m-0">{{(assessment?.totalCodingQuestions > 0) ? (assessment?.totalCodingQuestions
                                | number : '2.0') : 0 }}</h6>
                            <small class="text-muted">{{constants.codingType}}</small>
                        </div>
                        <div>
                            <h6 class="m-0">{{(assessment?.totalStackQuestions > 0) ? (assessment?.totalStackQuestions |
                                number : '2.0') : 0 }}</h6>
                            <small class="text-muted">{{constants.stackType}}</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-center" *ngIf="!noAssessmentsFound">
        <ngb-pagination [collectionSize]="allTotalCount" [pageSize]="pageSize" [(page)]="allPageIndex"
            class="d-flex justify-content-center" (pageChange)="changePage()" [maxSize]="maxSize" [rotate]="true"
            [ellipses]="false" [boundaryLinks]="true">
        </ngb-pagination>
    </div>

</div>